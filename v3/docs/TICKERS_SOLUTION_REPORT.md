# Tickers Database Query - Solution Report

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∏–ª —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ä–æ–≤, –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ ML –º–æ–¥—É–ª—è—Ö.

## –†–µ—à–µ–Ω–∏–µ

### 1. –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–∏–∫–µ—Ä–æ–≤
- **`pages/16_üìã_Tickers.py`** - –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Streamlit
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–∏–∫–µ—Ä–æ–≤ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–∏–∫–µ—Ä—É
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ML –º–æ–¥—É–ª—è–º–∏

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–∏–∫–µ—Ä–æ–≤ –≤ ML –º–æ–¥—É–ª–∏
- **`core/ml/integration.py`** - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_available_tickers()`
- **`core/ml/fallback.py`** - –î–æ–±–∞–≤–ª–µ–Ω fallback –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–∏–∫–µ—Ä–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ –ø–æ–ª–Ω–æ–≥–æ, —Ç–∞–∫ –∏ fallback —Ä–µ–∂–∏–º–∞

### 3. –û–±–Ω–æ–≤–ª–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **`pages/15_ü§ñ_ML_AI.py`** - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "Show Available Tickers"
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–ø–∏—Å–∫—É —Ç–∏–∫–µ—Ä–æ–≤ –ø—Ä—è–º–æ –∏–∑ ML —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ ML —Ñ—É–Ω–∫—Ü–∏—è–º–∏

### 4. –°–æ–∑–¥–∞–Ω—ã –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
- **`get_tickers.py`** - –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–∏–∫–µ—Ä–æ–≤
- **`check_db_tickers.py`** - –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **`quick_ticker_check.py`** - –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–∫–µ—Ä–æ–≤
- **`show_tickers.py`** - Streamlit —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `companies`:
```sql
CREATE TABLE companies (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    contract_code TEXT UNIQUE,  -- –¢–∏–∫–µ—Ä –∞–∫—Ü–∏–∏
    name TEXT,                  -- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
    isin TEXT,                  -- ISIN –∫–æ–¥
    figi TEXT,                  -- FIGI –∫–æ–¥
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### –¢–∞–±–ª–∏—Ü–∞ `daily_data`:
```sql
CREATE TABLE daily_data (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    company_id INTEGER,         -- –°—Å—ã–ª–∫–∞ –Ω–∞ companies.id
    date TEXT,                  -- –î–∞—Ç–∞
    open REAL,                  -- –¶–µ–Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è
    low REAL,                   -- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
    high REAL,                  -- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
    close REAL,                 -- –¶–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
    volume REAL,                -- –û–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤
    FOREIGN KEY(company_id) REFERENCES companies(id),
    UNIQUE (company_id, date)
);
```

## SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–∏–∫–µ—Ä–æ–≤

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å:
```sql
SELECT DISTINCT contract_code FROM companies ORDER BY contract_code;
```

### –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
```sql
SELECT 
    c.contract_code as Ticker,
    c.name as Company_Name,
    COUNT(dd.id) as Data_Points,
    MIN(dd.date) as First_Date,
    MAX(dd.date) as Last_Date,
    ROUND(AVG(dd.close), 2) as Avg_Price
FROM companies c
LEFT JOIN daily_data dd ON c.id = dd.company_id
GROUP BY c.id, c.contract_code, c.name
ORDER BY c.contract_code;
```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∏–∫–µ—Ä–æ–≤
- **–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∏–∫–µ—Ä–æ–≤** –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–ö–æ–ª–æ–Ω–æ—á–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- **–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** (—á–µ—Ä–µ–∑ Streamlit)

### 2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–µ—Ä–æ–≤**
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–∫–µ—Ä–∞
- **–î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç** (–ø–µ—Ä–≤–∞—è –∏ –ø–æ—Å–ª–µ–¥–Ω—è—è –¥–∞—Ç–∞)
- **–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞** –∑–∞ –ø–µ—Ä–∏–æ–¥

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ML
- **–ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** –≤ ML —Ñ—É–Ω–∫—Ü–∏—è—Ö
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ** —Å–ø–∏—Å–∫–∞ —Ç–∏–∫–µ—Ä–æ–≤
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–∫–µ—Ä–æ–≤** –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

### 4. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- **CSV —ç–∫—Å–ø–æ—Ä—Ç** —Å–ø–∏—Å–∫–∞ —Ç–∏–∫–µ—Ä–æ–≤
- **–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –≤ —Ç–∞–±–ª–∏—á–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- **–ì–æ—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í Streamlit –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "üìã –¢–∏–∫–µ—Ä—ã"
2. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–∏–∫–µ—Ä–æ–≤
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∏–∫–µ—Ä—ã –≤ ML –º–æ–¥—É–ª—è—Ö

### –í ML –º–æ–¥—É–ª—è—Ö:
```python
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ä–æ–≤
tickers = ml_manager.get_available_tickers()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∏–∫–µ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
prediction = ml_manager.predict_price_movement('SBER')
sentiment = ml_manager.analyze_market_sentiment()
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ:
```python
import sqlite3

conn = sqlite3.connect('stock_data.db')
cursor = conn.cursor()
cursor.execute("SELECT DISTINCT contract_code FROM companies ORDER BY contract_code")
tickers = [row[0] for row in cursor.fetchall()]
conn.close()
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

### 2. –¢–∞–±–ª–∏—Ü–∞ companies –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É

### 3. –ù–µ—Ç —Ç–∏–∫–µ—Ä–æ–≤
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–π
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### 4. –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- Graceful handling –æ—à–∏–±–æ–∫
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∏–∫–µ—Ä–∞–º–∏:
1. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è** —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
2. **ML –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∞–Ω–∞–ª–∏–∑–µ
3. **–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç:
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–∫–µ—Ä—ã
- –ü–æ–ª—É—á–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∏–∫–µ—Ä—ã –≤ ML –º–æ–¥—É–ª—è—Ö
- –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### ‚úÖ –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç:
- –ü–æ–ª—É—á–∞—Ç—å —Ç–∏–∫–µ—Ä—ã –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–æ–¥—É–ª—è–º–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–ª—É—á–µ–Ω–∏–µ–º —Å–ø–∏—Å–∫–∞ —Ç–∏–∫–µ—Ä–æ–≤ —Ä–µ—à–µ–Ω–∞ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ:
- ‚úÖ –°–æ–∑–¥–∞–Ω —É–¥–æ–±–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ML –º–æ–¥—É–ª—è–º–∏
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- ‚úÖ –û–±–µ—Å–ø–µ—á–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ —Ä–µ—à–µ–Ω–∏—è

–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ª–µ–≥–∫–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∏–∫–µ—Ä—ã –¥–ª—è ML –∞–Ω–∞–ª–∏–∑–∞ –∏ —Ç–æ—Ä–≥–æ–≤–ª–∏.
